GJ.add("app/ms_v2/vehicle/c2c/search_suggestion.js",["jquery","app/common/widget/widget.js"],function(b,a){a.autoInput=function(d){var f=d.$keywordInput;var c=d.defaultCount||10;var g=f.data("domain")||"";var h=f.data("target")||"_self";var e=f.data("ca")||"";GJ.use("js/util/autocomplete/autocomplete2.js",function(k){var m=$(".dataSourceButton").data("source");var j=new k({$input:f,data:m,maxItemsToShow:c,filterHandler:function(r,p){var n=[];r=r.replace(" ","");$.each(p,function(q,s){if(s.pinyin.indexOf(r.toLowerCase())===0||s.firstChar.indexOf(r.toLowerCase())===0||s.text.indexOf(r)===0){if(s.url!=""){n.push(s)}}});if(n.length===0){var o=[];o.url="";o.text="未找到符合条件的二手车!";o.hideResults=false;n.push(o)}return n},defaultDataHandler:function(n){n(m)},formatItem:function(n){if(!n.url){return"<span class='hot-tip'>"+n.text+"</span>"}else{return n.text}}});f.on("focus",function(){if($(this).val()){j.showResults()}});j.on("itemSelect",function(n){if(n.url){if(h==="_blank"){window.open(g+n.url+"?"+e)}else{_hmt.push(["_trackEvent","inpc_index_searchput","click","pc_index_search_rementuijian_c"]);window.location.href=n.url}f.val(n.text)}});var l=function(){var p=j.$resultEl.find("ul li:eq(0)");var n=f.val();if(p){var o=p.data("data");if(o.url){if(h=="_blank"){window.open(g+o.url+"?"+e)}else{window.location.href=o.url}f.val(o.text)}else{}}};var i=function(){var n=f.val();var p=$("input[name=hiddenCity]").val();var o="/"+p+"/buy/";if(n){_hmt.push(["_trackEvent","pc_index_search","input","pc_index_search_input_search_input"]);o=o+"_"+n+"/";if(h=="_blank"){window.open(o+"?"+e)}else{window.location.href=o}}};d.$el.find("button").on("click",l);f.on("keypress",function(n){if(n.keyCode===13&&j.active===-1){_hmt.push(["_trackEvent","pc_index_search","enter","pc_index_search_input_enter_enter"]);l()}});return j})}});